#!/bin/sed -f

# fold and annotate uppercase letters
s/[[:upper:]][[:upper:]][^[:lower:]]*/ğŠ£\L&ğŠ¼/g
#    GNU General: ğŠ£gnu gğŠ¼eneral  -->  ğŠ£gnuğŠ¼ General
s/\b\([[:alpha:]]\)ğŠ¼/ğŠ¼\U\1/g
#    in ROM).:  ğŠ£rom).ğŠ¼  -->  ğŠ£romğŠ¼ ).
s/\([^[:alpha:]]\+\)ğŠ¼/ğŠ¼\1/g
s/[[:upper:]]/ğ‹‡\L&/g

# normalize spaces ??
s/\s\+/ /g

# split and annotate word boundaries
s/^ \+//
s/ \+$//
s/\b/Â¦/g
s/Â¦ Â¦/Â¦/g
y/Â¦ / â–/
s/\b/Â¦/g
s/^ //
s/ $//

# fix wrong tokenization
s/Â¦ à¥ Â¦/à¥/g
# concatenate numbers (2x because of shared digits)
s/\([[:digit:]]\)Â¦ \(.\) Â¦\([[:digit:]]\)/\1\2\3/g
s/\([[:digit:]]\)Â¦ \(.\) Â¦\([[:digit:]]\)/\1\2\3/g
# concatenate '-' separated words
s,\([[:alnum:]]\)Â¦ \([-./]\) Â¦\([[:alnum:]]\),\1\2\3,g


# swap case folding and token boundaries
s/Â¦ğ‹‡/ğ‹‡Â¦/g
s/Â¦ğŠ£/ğŠ£Â¦/g
s/ğŠ¼Â¦/Â¦ğŠ¼/g

